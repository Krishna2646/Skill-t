<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learn - SkillForge</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: sans-serif; }
    .roadmap-item { cursor: pointer; padding: 4px 8px; border-radius: 4px; }
    .completed { background-color: #4a5568; color: #a0aec0; }
    .current { background-color: #6366f1; color: white; font-weight: bold; }
    .pending { color: #cbd5e0; }
    .subtopic { margin-left: 20px; }
    .loader { border: 4px solid #4a5568; border-top: 4px solid #6366f1; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: auto; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body class="bg-gray-950 text-white min-h-screen flex flex-col">

  <!-- HEADER -->
  <header class="p-4 border-b border-gray-800">
    <h1 class="text-xl font-bold text-indigo-400">SkillForge - Learning Path</h1>
  </header>

  <!-- MAIN -->
  <main class="flex-1 flex flex-row overflow-hidden">

    <!-- LEFT PANEL: Roadmap -->
    <aside class="w-1/3 bg-gray-900 border-r border-gray-800 p-4 overflow-y-auto">
      <h2 class="text-lg font-semibold mb-4">Roadmap</h2>
      <div id="roadmap-container">
        <!-- Roadmap items will be dynamically added here -->
      </div>
    </aside>

    <!-- RIGHT PANEL: AI Interaction -->
    <section class="flex-1 p-6 flex flex-col">
      <div id="ai-content" class="flex-1 overflow-y-auto">
        <div class="text-center mt-20">
          <div class="loader"></div>
          <p class="mt-4 text-gray-400">Assessing your level...</p>
        </div>
      </div>
      <div class="mt-4 flex">
        <input id="user-answer" type="text" placeholder="Type your answer..." class="flex-1 p-3 rounded-l-lg bg-gray-800 text-white focus:outline-none">
        <button id="submit-answer" class="bg-indigo-600 p-3 rounded-r-lg hover:bg-indigo-500">Submit</button>
      </div>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="p-4 text-center text-gray-500 text-sm border-t border-gray-800">
    Built with ‚ù§Ô∏è by Krishna2646 | SkillForge (MVP)
  </footer>

  <script>
let roadmapData = null;
let currentTopicIndex = 0;

// Load roadmap JSON
async function loadRoadmap() {
    try {
        const res = await fetch("roadmaps/machine_learning.json"); // ‚úÖ use underscore in filename
        roadmapData = await res.json();

        if (roadmapData && roadmapData.topics) {
            showTopic();
        } else {
            document.getElementById("roadmap-container").innerHTML =
                "<p>‚ö†Ô∏è No topics found in roadmap.</p>";
        }
    } catch (err) {
        console.error("Error loading roadmap:", err);
        document.getElementById("roadmap-container").innerHTML =
            "<p>‚ùå Failed to load roadmap. Please try again later.</p>";
    }
}

// Show current topic
function showTopic() {
    if (!roadmapData || currentTopicIndex >= roadmapData.topics.length) {
        document.getElementById("roadmap-container").innerHTML =
            "<p>üéâ You‚Äôve completed the roadmap!</p>";
        return;
    }

    const topic = roadmapData.topics[currentTopicIndex];
    document.getElementById("roadmap-container").innerHTML = `
        <h2>${topic.title}</h2>
        <p>${topic.description || ""}</p>
        <p><b>Difficulty:</b> ${topic.level || "Beginner"}</p>
        <p><b>Example Question:</b> ${topic.question || "What do you understand about this?"}</p>
    `;
}

// Handle user answer
function handleAnswer() {
    const answer = document.getElementById("user-answer").value.trim();
    if (!answer) return;

    // Store/assess answer (basic logic for now)
    console.log("User answer:", answer);

    // Move to next topic
    currentTopicIndex++;
    document.getElementById("user-answer").value = "";
    showTopic();
}

document.addEventListener("DOMContentLoaded", loadRoadmap);
</script>


</body>
</html>
